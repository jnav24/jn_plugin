{% extends "base.twig" %}

{% block content %}
    <div id="page_list">
        <popup :popup="popup">Are you sure you want to delete this page?</popup>

        <h2>All Pages <a href="{{ add_page_url }}" class="add-new-h2">Add New</a></h2>

        <div class="col_container sext col_head">
            <div class="col">Page Title</div>
            <div class="col">Created By</div>
            <div class="col">Modified By</div>
            <div class="col">Last Updated</div>
            <div class="col">Status</div>
            <div class="col">Delete</div>
        </div>

        <div style="border: 1px solid #e5e5e5; border-top: 0;">
            <page-list pages="{{ pages|json_encode() }}" url="{{ plugin_url }}"></page-list>
        </div>



        <table class="wp-list-table widefat fixed striped posts">
            <thead>
            <tr>
                <th><a href="#"><span>Page Title</span></a></th>
                <th><a href="#"><span>Created By</span></a></th>
                <th><a href="#"><span>Modified By</span></a></th>
                <th><a href="#"><span>Last Updated</span></a></th>
                <th><a href="#"><span>Delete</span></a></th>
            </tr>
            </thead>
            <tbody>
            {% for page in pages %}
                <tr data-id="{{ page.page_id }}">
                    <td><strong><a href="{{ plugin_url }}{{ page.page_url|lower }}">{{ page.page_name }}</a></strong></td>
                    <td>{{ getUserName(page.created_by) }}</td>
                    <td>{{ getUserName(page.modified_by) }}</td>
                    <td>{{ page.updated_at|date("m/d/Y h:i a") }}</td>
                    <td><a href="#" @click="showPopup({{ page|json_encode() }})">Delete Page</a></td>
                </tr>
            {% else %}
                <tr>
                    <td align="center" colspan="5" style="font-weight: bold">There are no pages.</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}